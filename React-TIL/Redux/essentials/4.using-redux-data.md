# Redux Essentials, Part 4: Using Redux Data

In Part 3: Basic Redux Data Flow, ì–´ë–»ê²Œ ë¹„ì–´ìˆëŠ” Redux+React í”„ë¡œì íŠ¸ë¥¼ ì…‹ì—…í•  ê²ƒì¸ì§€ ë³´ì•˜ê³ , slice of stateë¥¼ ì¶”ê°€í•˜ëŠ”ê²ƒ, ê·¸ë¦¬ê³  Redux stroeë¡œë¶€í„° ë°ì´í„°ë¥¼ ì½ê³  dataë¥¼ ì—…ë°ì´íŠ¸í•˜ëŠ” action dipatchë¥¼ í•˜ëŠ” React componentë“¤ì„ ë§Œë“¤ì—ˆë‹¤. ë˜í•œ ì–´ë–»ê²Œ appì—ì„œ ë°ì´í„°ê°€ íë¥´ëŠ”ì§€ë¥¼ actionì„ dispatchingí•˜ëŠ” ì»´í¬ë„ŒíŠ¸, actionì„ í”„ë¡œì„¸ì‹±í•˜ê³  ìƒˆë¡œìš´ stateë¥¼ ë°˜í™˜í•˜ëŠ” ë¦¬ë“€ì„œ, ìƒˆë¡œìš´ stateë¥¼ ì½ê³  ë¦¬ë Œë”ë§í•˜ëŠ” UI ì»´í¬ë„ŒíŠ¸ì™€ í•¨ê»˜ ë³´ì•˜ë‹¤. 

Redux logicì„ ì‘ì„±í•˜ëŠ” ì¤‘ìš”í•œ ë‹¨ê³„ë¥¼ ì•Œê¸° ë•Œë¬¸ì—, SNSì˜ í”¼ë“œë¥¼ ë³´ë‹¤ ìœ ìš©í•˜ê²Œ í•´ì£¼ëŠ” ìƒˆë¡œìš´ featuresë“¤ì„ ë§Œë“¤ì–´ë³¼ ê²ƒì´ë‹¤.  
: single post ë³´ê¸°, ê¸°ì¡´ì˜ posts ìˆ˜ì •í•˜ê¸°, postì˜ ì‘ì„±ìì— ëŒ€í•œ ë””í…Œì¼ ë³´ì—¬ì£¼ê¸°, postì˜ íƒ€ì„ìŠ¤íƒ¬í”„, ë¦¬ì•¡ì…˜ ë²„íŠ¼ ë“±..

** INFO ** 
ì½”ë“œ ì˜ˆì‹œëŠ” key conceptsì™€ ê° ì„¹ì…˜ì˜ ë³€ê²½ì‚¬í•­ì— í¬ì»¤ìŠ¤ë¥¼ ë‘ê³  ìˆë‹¤. 

## Showing Single Posts

Redux storeì— ìƒˆë¡œìš´ í¬ìŠ¤íŠ¸ë¥¼ ì¶”ê°€í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì—, post dataë¥¼ ë‹¤ë¥¸ ë°©ì‹ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” ë‹¤ë¥¸ featuresë“¤ë„ ì¶”ê°€í•  ìˆ˜ ìˆë‹¤. 

í˜„ì¬ëŠ”, post entrisëŠ” main feed pageì—ë§Œ ë³´ì—¬ì§€ê³  ìˆì§€ë§Œ, textê°€ ë„ˆë¬´ ê¸¸ë©´, ë‚´ìš©ì˜ ì¼ë¶€ë¶„ë§Œ ë°œì·Œí•˜ì—¬ ë³´ì—¬ì£¼ì–´ì•¼ í•œë‹¤. ê·¸ í•´ë‹¹ single post entryë§Œì˜ í˜ì´ì§€ë¥¼ ë³´ì—¬ì£¼ëŠ” ë°©ë²•ì´ ì´ì— ë„ì›€ì„ ì¤„ ìˆ˜ ìˆë‹¤. 

### Creating a Single Post Page

ìš°ì„ , `SiglePostPage` ì»´í¬ë„ŒíŠ¸ë¥¼ feature folderì— ì¶”ê°€í•´ì£¼ì–´ì•¼ í•œë‹¤. React Routerë¥¼ ì‚¬ìš©í•´ì„œ, /posts/123ê³¼ ê°™ì€ URLì„ ê°€ì§€ë©´ ì´ ì»´í¬ë„ŒíŠ¸ë¥¼ ë³´ì—¬ì¤„ ê²ƒì´ë‹¤. (í¬ìŠ¤íŠ¸ì˜ IDê°€ 123ì— í•´ë‹¹í•˜ëŠ” ê²½ìš°)

```js
// features/posts/SinglePostPage.js
import React from 'react'
import { useSelector } from 'react-redux'

export const SinglePostPage = ({ match }) => {
  const { postId } = match.params

  const post = useSelector(state =>
    state.posts.find(post => post.id === postId)
  )

  if (!post) {
    return (
      <section>
        <h2>Post not found!</h2>
      </section>
    )
  }

  return (
    <section>
      <article>
        <h2>{post.title}</h2>
        <p>{post.content}</p>
      </article>
    </section>
  )
}
```

ë¦¬ì•¡íŠ¸ ë¼ìš°í„°ëŠ” match ê°ì²´ë¥¼ propìœ¼ë¡œ ì „ë‹¬í•´ì£¼ëŠ”ë°, ì´ matchê°ì²´ëŠ” URL ì •ë³´ë¥¼ ë‹´ê³  ìˆë‹¤. ì´ ì»´í¬ë„ŒíŠ¸ë¥¼ ë Œë”ë§í•˜ê¸° ìœ„í•´ì„œ routeë¥¼ ì…‹ì—…í•˜ë©´, URLì˜ postIdë¼ëŠ” ì´ë¦„ì„ ê°€ì§„ ë³€ìˆ˜ë¡œ URLì˜ ë‘ë²ˆì§¸ ë¶€ë¶„ì„ íŒŒì‹±í•´ë‹¬ë¼ê³  ì „ë‹¬í•´ì¤„ ê²ƒì´ê³ , ê·¸ë¦¬ê³  match.paramsë¡œë¶€í„° ê°’ì„ ì½ì„ ê²ƒì´ë‹¤.  

ì¼ë‹¨ postId ê°’ì„ ë°›ìœ¼ë©´, selector í•¨ìˆ˜ì—ì„œ ì´ë¥¼ ì‚¬ìš©í•˜ì—¬ Redux storeì— ìˆëŠ” post ê°ì²´ë¥¼ ì°¾ì„ ìˆ˜ ìˆë‹¤. state.postsëŠ” ëª¨ë“  post ê°ì²´ë“¤ì˜ ë°°ì—´ì´ì–´ì•¼ í•œë‹¤ëŠ” ê²ƒì„ ì•Œê¸°ì—, Array.find() í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ë°°ì—´ì„ ìˆœíšŒí•œë’¤, ì°¾ëŠ” IDë¥¼ ë°œê²¬í•˜ë©´ í•´ë‹¹ post entryë¥¼ ë°˜í™˜í•œë‹¤. 

componentëŠ” useSelectorë¡œë¶€í„° ë°˜í™˜ë˜ëŠ” ê°’ì´ ìƒˆë¡œìš´ referenceë¡œ ë³€ê²½ë  ë•Œë§ˆë‹¤, ë¦¬ë Œë”ë§ ëœë‹¤ëŠ” ì ì„ ì£¼ëª©í•´ì•¼í•œë‹¤. ì»´í¬ë„ŒíŠ¸ëŠ” í•­ìƒ storeë¡œë¶€í„° í•„ìš”í•œ ë°ì´í„°ë¥¼ ê°€ëŠ¥í•œí•œ ê°€ì¥ ì‘ì€ ì¼ë¶€ë§Œì„ selectí•˜ë ¤ê³  í•´ì•¼í•œë‹¤. ê·¸ë˜ì•¼ë§Œ, ì§„ì§œ í•„ìš”í•  ë•Œë§Œ í™”ë©´ì´ ë¦¬ë Œë”ë§ ëœë‹¤. 

ë§Œì•½ì— userê°€ ì§ì ‘ URLì„ íƒ€ì´í•‘í•œë‹¤ë©´ ë§¤ì¹­ë˜ëŠ” post entryê°€ ìŠ¤í† ì–´ì— ì—†ì„ ìˆ˜ë„ ìˆë‹¤. ë˜ëŠ” ë¡œë“œëœ ë°ì´í„°ê°€ ì—†ì„ ìˆ˜ë„ ìˆë‹¤. ë§Œì•½ ì´ëŸ¬í•œ ì¼ì´ ë°œìƒí•œë‹¤ë©´, find() í•¨ìˆ˜ëŠ” undefinedë¥¼ ë°˜í™˜í•œë‹¤. ì»´í¬ë„ŒíŠ¸ëŠ” ì´ë¥¼ ì²´í¬í•˜ê³ , "Post not found" ì™€ ê°™ì€ ë©”ì„¸ì§€ë¥¼ í˜ì´ì§€ì— ë„ì›Œì¤˜ì•¼í•œë‹¤. 

storeì— í•´ë‹¹ ë°ì´í„°ë¥¼ ê°€ì§€ê³  ìˆë‹¤ê³  ê°€ì •í•˜ë©´, useSelectorê°€ ì´ë¥¼ ë°˜í™˜í•˜ê³ , ìš°ë¦¬ëŠ” í•´ë‹¹ í˜ì´ì§€ì—ì„œ í¬ìŠ¤íŠ¸ì˜ title, contentë¥¼ ë Œë”ë§í•˜ëŠ”ë° ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. 

ì´ëŠ” <PostList> ì»´í¬ë„ŒíŠ¸ì™€ ê½¤ë‚˜ ë¹„ìŠ·í•œ ë¡œì§ì´ë‹¤. ì „ì²´ posts ë°°ì—´ì„ ìˆœíšŒí•˜ë©° main feedì— ìš”ì•½ë³¸ì„ ë³´ì—¬ì£¼ì—ˆë˜ ê²ƒê³¼ ë§ì´ë‹¤. ìš°ë¦¬ëŠ” ë‘ ê³³ì—ì„œ ì‚¬ìš©ë  ìˆ˜ ìˆëŠ” Post ì»´í¬ë„ŒíŠ¸ë¥¼ ì¶”ì¶œí•´ë‚¼ ìˆ˜ë„ ìˆë‹¤. í•˜ì§€ë§Œ ì „ì²´ë¥¼ ë³´ì—¬ì¤„ ê²ƒì¸ì§€, ìš”ì•½ë³¸ì„ ë³´ì—¬ì¤„ ê²ƒì¸ì§€ì— ë”°ë¥¸ ì°¨ì´ê°€ ì´ë¯¸ ìˆë‹¤. ì–´ëŠì •ë„ ì¤‘ë³µëœ ë¶€ë¶„ì´ ìˆë‹¤ê³  í•˜ì—¬ë„, ì¼ë°˜ì ìœ¼ë¡œ í•œë™ì•ˆì€ ë¶„ë¦¬í•´ì„œ ì‘ì„±í•˜ëŠ” ê²ƒì´ ë‚«ë‹¤. ê·¸ë¦¬ê³  ì´í›„ì— ë‹¤ë¥¸ ì„¹ì…˜ì˜ ì½”ë“œê°€ ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ì»´í¬ë„ŒíŠ¸ë¡œ ì¶”ì¶œí•´ë‚¼ ì •ë„ë¡œ ì¶©ë¶„íˆ ë¹„ìŠ·í•˜ë‹¤ë©´ ë‚˜ì¤‘ì— ê²°ì •í•´ë„ëœë‹¤. 

### Adding the Single Post Route

Now that we have a <SinglePostPage> component, we can define a route to show it, and add links to each post in the front page feed.

We'll import SinglePostPage in App.js, and add the route:

```js
App.js
import { PostsList } from './features/posts/PostsList'
import { AddPostForm } from './features/posts/AddPostForm'
import { SinglePostPage } from './features/posts/SinglePostPage'

function App() {
  return (
    <Router>
      <Navbar />
      <div className="App">
        <Switch>
          <Route
            exact
            path="/"
            render={() => (
              <React.Fragment>
                <AddPostForm />
                <PostsList />
              </React.Fragment>
            )}
          />
          <Route exact path="/posts/:postId" component={SinglePostPage} />
          <Redirect to="/" />
        </Switch>
      </div>
    </Router>
  )
}
```

Then, in <PostsList>, we'll update the list rendering logic to include a <Link> that routes to that specific post:
```js
features/posts/PostsList.js
import React from 'react'
import { useSelector } from 'react-redux'
import { Link } from 'react-router-dom'

export const PostsList = () => {
  const posts = useSelector(state => state.posts)

  const renderedPosts = posts.map(post => (
    <article className="post-excerpt" key={post.id}>
      <h3>{post.title}</h3>
      <p className="post-content">{post.content.substring(0, 100)}</p>
      <Link to={`/posts/${post.id}`} className="button muted-button">
        View Post
      </Link>
    </article>
  ))

  return (
    <section className="posts-list">
      <h2>Posts</h2>
      {renderedPosts}
    </section>
  )
}
```
And since we can now click through to a different page, it would also be helpful to have a link back to the main posts page in the <Navbar> component as well:

```js
app/Navbar.js
import React from 'react'

import { Link } from 'react-router-dom'

export const Navbar = () => {
  return (
    <nav>
      <section>
        <h1>Redux Essentials Example</h1>

        <div className="navContent">
          <div className="navLinks">
            <Link to="/">Posts</Link>
          </div>
        </div>
      </section>
    </nav>
  )
}
```


## Editing Posts

ì¡´ì¬í•˜ëŠ” post IDë¥¼ ì·¨í•´ì„œ storeë¡œ ë¶€í„° postë¥¼ ì½ì–´ë“¤ì´ê³ , ìœ ì €ê°€ í•´ë‹¹ postì˜ ì œëª©ê³¼ contentë¥¼ ë³€ê²½í•˜ê³ , ê·¸ ë³€ê²½ì‚¬í•­ì„ ì €ì¥í•´ì„œ storeì— ì—…ë°ì´íŠ¸í•˜ëŠ” <EditPostForm> ì»´í¬ë„ŒíŠ¸ë¥¼ ì¶”ê°€í•´ë³´ì. 


### Updating Post Entries

ìš°ì„ ì€, ìƒˆë¡œìš´ reducer í•¨ìˆ˜ì™€ actionì„ postSliceì— ì¶”ê°€í•´ì£¼ì–´ì•¼ í•œë‹¤. ê·¸ë ‡ê²Œ í•´ì•¼ storeê°€ ì–´ë–»ê²Œ postsë¥¼ ì—…ë°ì´íŠ¸ í• ì§€ë¥¼ ì•Œê¸° ë•Œë¬¸ì´ë‹¤. 

`createSlice()` í˜¸ì¶œ ë‚´ë¶€ì—, ìš°ë¦¬ëŠ” ìƒˆë¡œìš´ í•¨ìˆ˜ë¥¼ reducesrs ê°ì²´ì— ì¶”ê°€í•  ê²ƒì´ë‹¤. reducerì˜ ì´ë¦„ì€ ë¬´ì—‡ì´ ì¼ì–´ë‚˜ëŠ”ì§€ë¥¼ ì˜ ë¬˜ì‚¬í•  ìˆ˜ ìˆì–´ì•¼í•œë‹¤. ì™œëƒí•˜ë©´ actionì´ dispatchë ë•Œë§ˆë‹¤, Redux Devtoolsì— ë‚˜íƒ€ë‚˜ëŠ” action type stringì˜ ì¼ë¶€ë¡œ ë‚˜íƒ€ë‚˜ëŠ” reducerì´ë¦„ì„ ë³¼ ê²ƒì´ê¸° ë•Œë¬¸ì´ë‹¤. (í•¨ìˆ˜ì˜ ì´ë¦„ì„ ì˜ ì§€ìœ¼ë©´, ì´í›„ì— ë””ë²„ê¹…í•  ë•Œì—ë„ ì–´ë–¤ ì¼ì´ ì¼ì–´ë‚¬ëŠ”ì§€ ì˜ ì•Œ ìˆ˜ ìˆë‹¤.) ìš°ë¦¬ì˜ ì²« reducerëŠ” `postAdded`ì˜€ë‹¤. ì´ë²ˆì—ëŠ” `postUpdated`ë¡œ ì§€ì–´ë³´ì. 

post ê°ì²´ë¥¼ ì—…ë°ì´íŠ¸ í•˜ê¸° ìœ„í•´ì„œëŠ” ìš°ë¦¬ëŠ” ì•„ë˜ì™€ ê°™ì€ ì‚¬í•­ì„ ì•Œì•„ì•¼í•œë‹¤. 

- ì—…ë°ì´íŠ¸ë˜ëŠ” postì˜ IDë¥¼ ì•Œì•„ì•¼í•œë‹¤. ê·¸ë˜ì•¼ stateì—ì„œ ì˜¬ë°”ë¥¸ post ê°ì²´ë¥¼ ì°¾ì„ ìˆ˜ ìˆë‹¤. 
- ìœ ì €ê°€ ê¸°ì…í•œ ìƒˆë¡œìš´ title, content fieldë¥¼ ì•Œì•„ì•¼ í•œë‹¤.

Redux action ê°ì²´ëŠ” type fieldë¥¼ ê°€ì§€ê³ (normally a descriptive string), ê·¸ë¦¬ê³  ë¬´ì—‡ì´ ì¼ì–´ë‚¬ëŠ”ì§€ì— ëŒ€í•œ informationì— ê´€í•œ fieldë¥¼ ê°€ì§„ë‹¤. ì¼ë°˜ì ìœ¼ë¡œëŠ”, `action.payload`ë¼ê³  ë¶ˆë¦¬ëŠ” fieldì— ì¶”ê°€ì ì¸ infoë¥¼ ë„£ì–´ì¤€ë‹¤. í•˜ì§€ë§Œ payload fieldê°€ ì–´ë–¤ ê²ƒì„ ê°€ì§€ëŠ” ì§€ì— ê´€í•´ì„œëŠ” í”„ë¡œê·¸ë¨ ì‘ì„±ìê°€ ê²°ì •í•˜ëŠ” ê²ƒì´ë‹¤.(string, number, object, array ë“±ë“±..) ì´ ê²½ìš°ì—ëŠ” 3 ë¶€ë¶„ì˜ ì •ë³´ê°€ í•„ìš”í•˜ê¸° ë•Œë¬¸ì—, payload í•„ë“œëŠ” ë‚´ë¶€ì— 3ê°œì˜ fieldë¥¼ ê°€ì§€ëŠ” ê°ì²´ê°€ ë˜ë„ë¡ í•˜ì. ì¦‰, ì´ action ê°ì²´ëŠ” `{type: 'posts/postUpdated', payload:{id, title, content}}`ì™€ ê°™ë‹¤. 

ê¸°ë³¸ì ìœ¼ë¡œ `createSlice`ë¥¼ í†µí•´ ë§Œë“¤ì–´ì§„ action creatorsëŠ” í•˜ë‚˜ì˜ ì¸ìë¥¼ ë„˜ê²¨ì¤„ ê²ƒì´ë¼ê³  ê¸°ëŒ€í•˜ê³ , í•´ë‹¹ ê°’ì€ actionê°ì²´ì˜ action.payloadë¡œì¨ ë“¤ì–´ê°ˆ ê²ƒì´ë¼ê³  ê¸°ëŒ€í•œë‹¤. ê·¸ë˜ì„œ ìš°ë¦¬ê°€ ê·¸ëŸ¬í•œ fieldsë¥¼ ê°€ì§€ëŠ” objectë¥¼ postUpdated action creatorì˜ ì¸ìë¡œ ë„˜ê²¨ì¤„ ìˆ˜ ìˆë‹¤. 

actionì´ dispatch ë  ë•Œ, reducerê°€ ì–´ë–»ê²Œ ì‹¤ì œë¡œ stateê°€ ì—…ë°ì´íŠ¸ ë˜ì–´ì•¼í• ì§€ ê²°ì •í•˜ëŠ” ê²ƒì— ì±…ì„ì´ ìˆë‹¤ëŠ” ê²ƒì„ ìš°ë¦¬ëŠ” ì•Œê³  ìˆë‹¤. 
ìš°ë¦¬ëŠ” reducerê°€ ì˜¬ë°”ë¥¸ post objectë¥¼ IDì— ê¸°ì´ˆí•´ì„œ ì°¾ì„ ìˆ˜ ìˆë„ë¡ í•´ì•¼í•˜ê³ , ëª…í™•í•˜ê²Œ í•´ë‹¹ postì˜ text, content í•„ë“œë¥¼ ì—…ë°ì´íŠ¸í•˜ê²Œ í•´ì•¼í•œë‹¤. 

ëìœ¼ë¡œ, ìš°ë¦¬ëŠ” `createSlice`ê°€ ë§Œë“¤ì–´ì¤€ action creator í•¨ìˆ˜ë¥¼ exportí•´ì•¼í•œë‹¤. ê·¸ë ‡ê²Œ í•´ì•¼ ìœ ì €ê°€ postë¥¼ ì €ì¥í–ˆì„ ë•Œ, `postUpdated` actionì´ dispatchí•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì´ë‹¤

ëª¨ë“  ìš”êµ¬ì‚¬í•­ë“¤ì„ ê³ ë ¤í•˜ì—¬, ì•„ë˜ì™€ ê°™ì´ `postSlice`ë¥¼ ë§Œë“¤ì–´ì¤€ë‹¤. 
```js
features/posts/postsSlice.js
const postsSlice = createSlice({
  name: 'posts',
  initialState,
  reducers: {
    postAdded(state, action) {
      state.push(action.payload)
    },
    postUpdated(state, action) {
      const { id, title, content } = action.payload
      const existingPost = state.find(post => post.id === id)
      if (existingPost) {
        existingPost.title = title
        existingPost.content = content
      }
    }
  }
})

export const { postAdded, postUpdated } = postsSlice.actions

export default postsSlice.reducer
```

### Creating an Edit Post Form

ìƒˆë¡œìš´ <EditPostForm> ì»´í¬ë„ŒíŠ¸ëŠ” <AddPostForm>ê³¼ ë¹„ìŠ·í•˜ë‹¤. í•˜ì§€ë§Œ, ë¡œì§ì´ ì•½ê°„ ë‹¤ë¥¼ í•„ìš”ì„±ì´ ìˆë‹¤. storeë¡œ ë¶€í„° post ê°ì²´ë¥¼ ì–»ì–´ì™€ì„œ ì´ë¥¼ 
í•´ë‹¹ ì»´í¬ë„ŒíŠ¸ì˜ state fieldsë¥¼ ì´ˆê¸°í™” í•˜ëŠ”ë° ì‚¬ìš©í•œë‹¤. ê·¸ë¦¬ê³  ì´ë¥¼ ìœ ì €ê°€ ë³€ê²½í•  ìˆ˜ ìˆê²Œ í•´ì¤€ë‹¤. ìš°ë¦¬ëŠ” ìœ ì €ê°€ ì™„ë£Œí•˜ë©´, ë³€ê²½ëœ title, content ê°’ì„ ë‹¤ì‹œ storeì—  ì €ì¥í•´ì¤€ë‹¤. ë˜í•œ React Routerì˜ history APIë¥¼ ì‚¬ìš©í•´ì„œ, single post pageë¡œ ì „í™˜í•´ì„œ í•´ë‹¹ postë¥¼ ë³´ì—¬ì¤„ ê²ƒì´ë‹¤. 

```js
features/posts/EditPostForm.js
import React, { useState } from 'react'
import { useDispatch, useSelector } from 'react-redux'
import { useHistory } from 'react-router-dom'

import { postUpdated } from './postsSlice'

export const EditPostForm = ({ match }) => {
  const { postId } = match.params

  const post = useSelector(state =>
    state.posts.find(post => post.id === postId)
  )

  const [title, setTitle] = useState(post.title)
  const [content, setContent] = useState(post.content)

  const dispatch = useDispatch()
  const history = useHistory()

  const onTitleChanged = e => setTitle(e.target.value)
  const onContentChanged = e => setContent(e.target.value)

  const onSavePostClicked = () => {
    if (title && content) {
      dispatch(postUpdated({ id: postId, title, content }))
      history.push(`/posts/${postId}`)
    }
  }

  return (
    <section>
      <h2>Edit Post</h2>
      <form>
        <label htmlFor="postTitle">Post Title:</label>
        <input
          type="text"
          id="postTitle"
          name="postTitle"
          placeholder="What's on your mind?"
          value={title}
          onChange={onTitleChanged}
        />
        <label htmlFor="postContent">Content:</label>
        <textarea
          id="postContent"
          name="postContent"
          value={content}
          onChange={onContentChanged}
        />
      </form>
      <button type="button" onClick={onSavePostClicked}>
        Save Post
      </button>
    </section>
  )
}
```
SinglePostPageì™€ ë§ˆì°¬ê°€ì§€ë¡œ,  App.jsì— ì´ë¥¼ importí•´ì„œ, ì´ ì»´í¬ë„ŒíŠ¸ë¥¼ ë Œë”ë§í•  ìˆ˜ ìˆëŠ” routerë¥¼ ì¶”ê°€í•´ì£¼ì–´ì•¼ í•œë‹¤. ê·¸ë¦¬ê³  SingliePostPageì—ì„œ EditPostPageë¡œ ê°ˆ ìˆ˜ ìˆëŠ” linkë„ ì•„ë˜ì™€ ê°™ì´ ì¶”ê°€í•´ì¤˜ì•¼í•œë‹¤. 

```js
features/post/SinglePostPage.js
import { Link } from 'react-router-dom'

export const SinglePostPage = ({ match }) => {
        // omit other contents
  <p  className="post-content">{post.content}</p>
  <Link to={`/editPost/${post.id}`} className="button">
    Edit Post
  </Link>
```

### Preparing Action Payloads

ìš°ë¦¬ëŠ” `createSlice`ì˜ action creatorê°€ ì¼ë°˜ì ìœ¼ë¡œ action.payloadê°€ ë˜ëŠ” ì¸ìë¥¼ ë°›ëŠ” ë‹¤ëŠ” ê²ƒì„ ë³´ì•˜ë‹¤. ì´ëŠ” ëŒ€ë¶€ë¶„ì˜ ì¼ë°˜ì ì€ ì‚¬ìš© íŒ¨í„´ì„ ê°„ëµí™”í•œ ê²ƒì´ì§€ë§Œ, ë•Œë•Œë¡œ action ê°ì²´ì˜ contentsë¥¼ ì¤€ë¹„í•˜ê¸° ìœ„í•´ì„œ ë” ë§ì€ ì¼ì´ í•„ìš”í•  ë•Œë„ ìˆë‹¤.  
`postAdded` actionì˜ ê²½ìš°ì—ëŠ” ìš°ë¦¬ëŠ” unique IDë¥¼ ê°ê°ì˜ ìƒˆë¡œìš´ postë¥¼ ìœ„í•´ì„œ ìƒì„±í•´ì¤„ í•„ìš”ê°€ ìˆê³ , payloadê°€ {id, title, content}ì™€ ê°™ì€ ëª¨ì–‘ì¸ì§€ë„ í™•ì¸ì´ í•„ìš”í•˜ë‹¤. 

ì§€ê¸ˆì€ ë¦¬ì•¡íŠ¸ ì»´í¬ë„ŒíŠ¸ë‚´ì—ì„œ ìš°ë¦¬ëŠ” IDë¥¼ ìƒì„±í•˜ê³  payload objectë¥¼ ìƒì„±í•˜ì˜€ë‹¤. ê·¸ë¦¬ê³  ì´ payload ê°ì²´ë¥¼ postAddedë¡œ ë„˜ê²¨ì£¼ì—ˆë‹¤. í•˜ì§€ë§Œ ë‹¤ë¥¸ ì»´í¬ë„ŒíŠ¸ì—ì„œ ê°™ì€ actionì„ dispatch í•  í•„ìš”ê°€ ìˆê±°ë‚˜, í˜¹ì€ payloadë¥¼ ì¤€ë¹„í•˜ëŠ” ë¡œì§ì´ ë³µì¡í•´ì§€ë©´ ì–´ë–»ê²Œ í•  ê²ƒì¸ê°€?  
ë§¤ë²ˆ ìš°ë¦¬ê°€ dispatch í•˜ê¸°ë¥¼ ì›í•˜ëŠ” ë¡œì§ì„ ë°˜ë³µí•´ì•¼í•˜ê³ , ì»´í¬ë„ŒíŠ¸ê°€ payloadê°€ ì–´ë–¤ ëª¨ì–‘ì¸ì§€ë¥¼ ì•Œë„ë¡ ê°•ì œí•  ê²ƒì´ë‹¤..??? ?? ë¨¼ë§ì´ì§€

** CAUTION **
ë§Œì•½ì— actionì´ unique IDë¥¼ í•„ìš”ë¡œ í•˜ê±°ë‚˜ ë˜ëŠ” random valueë¥¼ ê°€ì§„ë‹¤ë©´, í•­ìƒ ì²«ë²ˆì§¸ë¡œ ìƒì„±í•˜ì—¬ì„œ action ê°ì²´ì— ë„£ì–´ì£¼ì–´ì•¼ í•œë‹¤.
ReducersëŠ” random valueë¥¼ ì ˆëŒ€ë¡œ ê³„ì‚°í•˜ì§€ ì•ŠëŠ”ë°, ì´ëŠ” ê·¸ ê²°ê³¼ê°€ ì˜ˆì¸¡ ë¶ˆê°€ëŠ¥í•˜ê¸° ë•Œë¬¸ì´ë‹¤. 

postAdded action creator ì§ì ‘ ì‘ì„±í•œë‹¤ë©´, ì•„ë˜ì™€ ê°™ì´ ì‘ì„±í•  ìˆ˜ ìˆë‹¤. 
```js
// hand-written action creator
function postAdded(title, content) {
  const id = nanoid()
  return {
    type: 'posts/postAdded',
    payload: { id, title, content }
  }
}
```

í•˜ì§€ë§Œ, Reudx Toolkitì˜ `createSlice` ëŠ” ì´ëŸ¬í•œ action creatorsë¥¼ ìë™ìœ¼ë¡œ ìƒì„±í•´ì¤€ë‹¤. ì´ëŠ” ìš°ë¦¬ê°€ action creatorë¥¼ ì§ì ‘ ì‘ì„±í•˜ì§€ ì•Šê²Œ í•´ì£¼ì–´ì„œ ì½”ë“œë¥¼ ë³´ë‹¤ ì§§ê²Œí•´ì£¼ì§€ë§Œ, ì—¬ì „íˆ action.payloadì˜ ë‚´ìš©ë¬¼ì„ ì»¤ìŠ¤í„°ë§ˆì´ì§•í•˜ëŠ” ë°©ë²•ì´ í•„ìš”í•˜ë‹¤. 

`createSlice`ëŠ” "prepare callback" í•¨ìˆ˜ë¥¼ ë¦¬ë“€ì„œ ì‘ì„±ì‹œì— ì •ì˜í•  ìˆ˜ ìˆë„ë¡ í•´ì¤€ë‹¤. "prepare callback" í•¨ìˆ˜ëŠ” ì—¬ëŸ¬ê°œì˜ ì¸ìë¥¼ ë°›ê³ , unique IDì™€ ê°™ì€ ëœë¤ ê°’ì„ ìƒì„±í•˜ê³ , 
Fortunately, createSlice lets us define a "prepare callback" function when we write a reducer. The "prepare callback" function can take multiple arguments, generate random values like unique IDs, and run whatever other synchronous logic is needed to decide what values go into the action object. 
ê·¸ë¦¬ê³  payload fieldë¥¼ ê°€ì§„ ê°ì²´ë¥¼ ë°˜í™˜í•œë‹¤. (ë°˜í™˜ëœ ê°ì²´ëŠ” meta fieldë¥¼ ê°€ì§ˆ ìˆ˜ë„ ìˆë‹¤. meta fieldë€ extra descriptive values to the action, and an error field, which should be a boolean indicating whether this action represents some kind of an error.)

`createSlice`ì˜ reducers í•„ë“œ ë‚´ë¶€ì—ëŠ”, {reducer, prepare}ì™€ ê°™ì´ ê°ì²´ë¡œ ì •ì˜í•  ìˆ˜ ìˆë‹¤.

```js
features/posts/postsSlice.js
const postsSlice = createSlice({
  name: 'posts',
  initialState,
  reducers: {
    postAdded: {
      reducer(state, action) {
        state.push(action.payload)
      },
      prepare(title, content) {
        return {
          payload: {
            id: nanoid(),
            title,
            content
          }
        }
      }
    }
    // other reducers here
  }
})
```
ì´ì œ ìš°ë¦¬ì˜ ì»´í¬ë„ŒíŠ¸ëŠ” payload objectê°€ ì–´ë–»ê²Œ ìƒê²¼ëŠ”ì§€ ê±±ì •í•  í•„ìš”ê°€ ì—†ë‹¤. - action creatorê°€ ì˜¬ë°”ë¥¸ ë°©ì‹ìœ¼ë¡œ ì´ë“¤ì„ ë„£ì–´ì¤„ ê²ƒì´ë‹¤. ê·¸ë˜ì„œ ìš°ë¦¬ëŠ” componentë¥¼ ì—…ë°ì´íŠ¸í•  ìˆ˜ ìˆë‹¤. ì™œëƒí•˜ë©´ postAddedë¥¼ dispatchí•  ë•Œ, titleê³¼ contentë¥¼ ì¸ìë¡œ ë„˜ê²¨ì£¼ì—ˆê¸° ë•Œë¬¸ì´ë‹¤. 

```js
features/posts/AddPostForm.js
Copy
const onSavePostClicked = () => {
  if (title && content) {
    dispatch(postAdded(title, content))
    setTitle('')
    setContent('')
  }
}
```

## Users and Posts

ì§€ê¸ˆê¹Œì§€, ìš°ë¦¬ëŠ” í•˜ë‚˜ì˜ sliceë¥¼ ê°€ì§€ê³  ìˆë‹¤. ê·¸ ë¡œì§ì€ `postSlice.js`ì— ì •ì˜ë˜ì–´ ìˆê³ , ë°ì´í„°ëŠ” state.postsì— ì €ì¥ë˜ì–´ ìˆê³ , ê·¸ë¦¬ê³  ëª¨ë“  ì»´í¬ë„ŒíŠ¸ë“¤ì€ posts featureê³¼ ê´€ë ¨ë˜ì–´ ìˆì—ˆë‹¤.  
í˜„ì‹¤ì˜ appì€ ë‹¤ë¥¸ ìˆ˜ ë§ì€ stateì˜ sliceë“¤ë¡œ êµ¬ì„±ë˜ì–´ ìˆë‹¤. ê·¸ë¦¬ê³  ëª‡ëª‡ì˜ ë‹¤ë¥¸ Redux logicê³¼  ë¦¬ì•¡íŠ¸ ì»´í¬ë„ŒíŠ¸ë¥¼ ìœ„í•œ "feature folder"ê°€ ìˆë‹¤.  

ë§Œì•½ ë‹¤ë¥¸ ì—°ê´€ë˜ì–´ ìˆëŠ” ì‚¬ëŒë“¤ì´ ì—†ã……ë‹¤ë©´ "social media" ì•±ì´ë¼ê³  í•  ìˆ˜ ì—†ë‹¤. appì—ì„œ ìœ ì €ë“¤ì˜ ë¦¬ìŠ¤íŠ¸ë¥¼ ì¶”ì í•˜ëŠ” ë¶€ë¶„ì„ ì¶”ê°€í•˜ê³ , ê·¸ ë°ì´í„°ë¥¼ ì´ìš©í•˜ëŠ” postì™€ ê´€ë ¨ëœ ê¸°ëŠ¥ë“¤ì„ ì—…ë°ì´íŠ¸í•˜ì. 

### Adding a Users Slice

"users"ì˜ ê°œë…ì€ "posts"ì˜ ê°œë…ê³¼ëŠ” ë‹¤ë¥´ê¸° ë•Œë¬¸ì—, postsì˜ ë°ì´í„°ì™€ ì½”ë“œë¡œë¶€í„° usersì˜ ì½”ë“œì™€ ë°ì´í„°ë¥¼ ë¶„ë¦¬í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤.  
ìš°ë¦¬ëŠ” `features/users` folderë¥¼ ì¶”ê°€í•  ê²ƒì´ê³ , ê·¸ ê³³ì— `userSlice` fileì„ ì¶”ê°€í•  ê²ƒì´ë‹¤. posts sliceì™€ ë§ˆì°¬ê°€ì§€ë¡œ, ì´ˆê¸°ì˜ ëª‡ëª‡ entriesë¥¼ ì¶”ê°€í•  ê²ƒì´ë‹¤.

```js
features/users/usersSlice.js
import { createSlice } from '@reduxjs/toolkit'

const initialState = [
  { id: '0', name: 'Tianna Jenkins' },
  { id: '1', name: 'Kevin Grant' },
  { id: '2', name: 'Madison Price' }
]

const usersSlice = createSlice({
  name: 'users',
  initialState,
  reducers: {}
})

export default usersSlice.reducer
```

í˜„ì¬ë¡œì„œëŠ”, ë°ì´í„°ë¥¼ ì—…ë°ì´íŠ¸í•´ì¤„ í•„ìš”ê°€ ì—†ë‹¤. ë”°ë¼ì„œ, reducers fieldë¥¼ ë¹ˆ ê°ì²´ë¡œ ë‚¨ê²¨ë‘ê³ , ë‚˜ì¤‘ì— ëŒì•„ì™€ì„œ ì¶”ê°€í•  ê²ƒì´ë‹¤.

ì´ì „ê³¼ ê°™ì´, usersReducerë¥¼ store fileì— importí•´ì„œ store setup ë¶€ë¶„ì— ì¶”ê°€í•  ê²ƒì´ë‹¤. 

```js
app/store.js
import { configureStore } from '@reduxjs/toolkit'

import postsReducer from '../features/posts/postsSlice'
import usersReducer from '../features/users/usersSlice'

export default configureStore({
  reducer: {
    posts: postsReducer,
    users: usersReducer
  }
})
```

### Adding Authors for Posts

appì˜ ëª¨ë“  postëŠ” í•˜ë‚˜ì˜ ìœ ì €ì— ì˜í•´ì„œ ì‘ì„±ë˜ì—ˆê³ , ë§¤ë²ˆ ìƒˆë¡œìš´ postë¥¼ ì¶”ê°€í•  ë•Œ, ì–´ë–¤ ìœ ì €ê°€ ì‘ì„±í–ˆëŠ”ì§€ë¥¼ íŠ¸ë˜í‚¹í–ˆë‹¤. 

ì‹¤ì œ appì—ì„œëŠ”, `state.currentUser`ì™€ ê°™ì€ ì¢…ë¥˜ì˜ fieldë¥¼ ê°€ì§€ê³ , í˜„ì¬ ë¡œê·¸ì¸ ëœ ìœ ì €ë¥¼ ê³„ì† íŠ¸ë˜í‚¹í•œë‹¤. ê·¸ë¦¬ê³  ê·¸ ìœ ì €ê°€ postë¥¼ ì¶”ê°€í•  ë•Œ, ê·¸ ì •ë³´ë¥¼ ì´ìš©í•œë‹¤. (ê·¸ëŸ¬ë‹ˆê¹Œ, ì¼ë°˜ì ì€ appì€ post ì‘ì„±ì‹œì—, postì— ê´€ë ¨ëœ ê²ƒì„ ë°›ì•„ì„œ, storeì˜ ê·¸ ìœ ì € ì •ë³´ë¥¼ ê°€ì ¸ì™€ì„œ ì‚¬ìš©í•˜ë©´ ëœë‹¤.)

ì´ ì˜ˆì‹œì—ì„œ ê°„ë‹¨í•˜ê²Œ í•˜ê¸° ìœ„í•´ì„œ, <AddPostForm> ì»´í¬ë„ŒíŠ¸ë¥¼ ì—…ë°ì´íŠ¸ í•  ê²ƒì´ë‹¤. ê·¸ë ‡ê²Œ í•´ì„œ, dropdown listì—ì„œ ìœ ì €ë¥¼ ì„ íƒí•˜ê³ , ê·¸ ìœ ì €ì˜ IDë¥¼ postì˜ ë¶€ë¶„ìœ¼ë¡œ í¬í•¨í•  ê²ƒì´ë‹¤. ì¼ë‹¨ ìš°ë¦¬ì˜ post ê°ì²´ê°€ user IDë¥¼ ê°€ì§€ê²Œ ë˜ë©´, ì´ë¥¼ ì‚¬ìš©í•´ì„œ ìš°ë¦¬ëŠ” UIì— ìˆëŠ” ê°ê°ì˜ postì— usersì˜ nameì„ ì°¾ì•„ì„œ ë³´ì—¬ì¤„ ìˆ˜ ìˆë‹¤. 

ìš°ì„ , ìš°ë¦¬ëŠ” postAdded action creatorê°€ user IDë¥¼ ì¸ìë¡œ ë°›ì„ ìˆ˜ ìˆê²Œ ìˆ˜ì •í•´ì£¼ì–´ì•¼ í•œë‹¤. ê·¸ë¦¬ê³  ì´ë¥¼ actionì— ì¶”ê°€í•´ì¤€ë‹¤. (ìš°ë¦¬ëŠ” ë˜í•œ ê¸°ì¡´ì˜ initialStateì•ˆì˜ ì¡´ì¬í•˜ëŠ” post entriesë¥¼ ì—…ë°ì´íŠ¸í•´ì„œ post.user fieldë¥¼ ë¶€ì—¬í•  ê²ƒì´ë‹¤.)

```js
features/posts/postsSlice.js
const postsSlice = createSlice({
  name: 'posts',
  initialState,
  reducers: {
    postAdded: {
      reducer(state, action) {
        state.push(action.payload)
      },
      prepare(title, content, userId) {
        return {
          payload: {
            id: nanoid(),
            title,
            content,
            user: userId
          }
        }
      }
    }
    // other reducers
  }
})
```

ì´ì œ <AddPostForm> ì»´í¬ë„ŒíŠ¸ì—ì„œ, ìš°ë¦¬ëŠ” useSelectorë¥¼ í†µí•´ì„œ storeì˜ users listë¥¼ ì½ì–´ë“¤ì¼ ìˆ˜ ìˆë‹¤. ê·¸ë¦¬ê³  ì´ë“¤ì„ dropdown ë©”ë‰´ë¡œ ë³´ì—¬ì¤„ ìˆ˜ ìˆë‹¤.  
ê·¸ë¦¬ê³  selected userì˜ IDë¥¼ ì·¨í•´ì„œ ì´ë¥¼ postAdded action creatorì— ì¸ìë¡œ ë„˜ê²¨ì¤„ ê²ƒì´ë‹¤. ì´ë¥¼ í•˜ëŠ” ë™ì•ˆì—, formì— validation ë¡œì§ì„ ì¶”ê°€í•  ìˆ˜ ìˆë‹¤. ê·¸ë ‡ê²Œ í•´ì„œ titleê³¼ contentsê°€ ì‹¤ì œ ë°ì´í„°ë¥¼ ë„£ì–´ì•¼ì§€ë§Œ "Save Post" ë²„íŠ¼ì„ ëˆ„ë¥¼ ìˆ˜ ìˆë‹¤. 

```js
features/posts/AddPostForm.js
import React, { useState } from 'react'
import { useDispatch, useSelector } from 'react-redux'

import { postAdded } from './postsSlice'

export const AddPostForm = () => {
  const [title, setTitle] = useState('')
  const [content, setContent] = useState('')
  const [userId, setUserId] = useState('')

  const dispatch = useDispatch()

  const users = useSelector(state => state.users)

  const onTitleChanged = e => setTitle(e.target.value)
  const onContentChanged = e => setContent(e.target.value)
  const onAuthorChanged = e => setUserId(e.target.value)

  const onSavePostClicked = () => {
    if (title && content) {
      dispatch(postAdded(title, content, userId))
      setTitle('')
      setContent('')
    }
  }

  const canSave = Boolean(title) && Boolean(content) && Boolean(userId)

  const usersOptions = users.map(user => (
    <option key={user.id} value={user.id}>
      {user.name}
    </option>
  ))

  return (
    <section>
      <h2>Add a New Post</h2>
      <form>
        <label htmlFor="postTitle">Post Title:</label>
        <input
          type="text"
          id="postTitle"
          name="postTitle"
          placeholder="What's on your mind?"
          value={title}
          onChange={onTitleChanged}
        />
        <label htmlFor="postAuthor">Author:</label>
        <select id="postAuthor" value={userId} onChange={onAuthorChanged}>
          <option value=""></option>
          {usersOptions}
        </select>
        <label htmlFor="postContent">Content:</label>
        <textarea
          id="postContent"
          name="postContent"
          value={content}
          onChange={onContentChanged}
        />
        <button type="button" onClick={onSavePostClicked} disabled={!canSave}>
          Save Post
        </button>
      </form>
    </section>
  )
}
```
post list itemë“¤ê³¼ <SinglePostPage> ë‚´ë¶€ì— postì˜ authorë¥¼ ë³´ì—¬ì£¼ëŠ” ë°©ë²•ì´ í•„ìš”í•˜ë‹¤. ìš°ë¦¬ëŠ” ê°™ì€ ì¢…ë¥˜ì˜ infoë¥¼ í•˜ë‚˜ ì´ìƒì˜ ì¥ì†Œì—ì„œ ë³´ì—¬ì£¼ì–´ì•¼ í•˜ê¸° ë•Œë¬¸ì—, user IDë¥¼ propìœ¼ë¡œ ê°€ì§€ëŠ” PostAuthor componentë¥¼ ë§Œë“¤ ìˆ˜ ìˆë‹¤. ì´ëŠ” user objectë¥¼ look upí•˜ê³ , user's nameì„ formatí•œë‹¤. 
```js
features/posts/PostAuthor.js
import React from 'react'
import { useSelector } from 'react-redux'

export const PostAuthor = ({ userId }) => {
  const author = useSelector(state =>
    state.users.find(user => user.id === userId)
  )

  return <span>by {author ? author.name : 'Unknown author'}</span>
}
```
ìš°ë¦¬ëŠ” ì•ìœ¼ë¡œì˜ ì»´í¬ë„ŒíŠ¸ë“¤ì—ì„œ ê°™ì€ íŒ¨í„´ì„ ë”°ë¥¼ ê²ƒì´ë¼ëŠ” ê²ƒì„ ì£¼ëª©í•˜ì. Redux storeë¡œë¶€í„° ë°ì´í„°ë¥¼ ì½ì–´ë“¤ì¼ í•„ìš”ê°€ ìˆëŠ” ì–´ë– í•œ ì»´í¬ë„ŒíŠ¸ë“  useSelector hookì„ ì‚¬ìš©í•  ìˆ˜ ìˆê³ , í•„ìš”ë¡œí•˜ëŠ” ë°ì´í„°ì˜ ë¶€ë¶„ì„ ë½‘ì•„ë‚¼ ìˆ˜ ìˆë‹¤. ë˜í•œ ë§ì€ ì»´í¬ë„ŒíŠ¸ë“¤ì€ Reudx storeì— ìˆëŠ” ê°™ì€ ë°ì´í„°ë¥¼ ê°™ì€ ì‹œê°„ì— ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤. 

PostAuthore componentë¥¼ `PostList.js`, `SinglePostPage.js`ì— importí•´ì„œ, <PostAuthor userId={post.user} />ë¡œ ë Œë”ë§í•˜ê³ , ê·¸ë¦¬ê³  ë§¤ë²ˆ post Entryë¥¼ ì¶”ê°€í•  ë•Œë§ˆë‹¤, selected user's nameì€ ë Œë”ë§ëœ post ë‚´ë¶€ì— ë‚˜íƒ€ë‚  ê²ƒì´ë‹¤. 

## More Post Features

ì´ì œ, ìš°ë¦¬ëŠ” postsë¥¼ ë§Œë“¤ê³ , ìˆ˜ì •í•  ìˆ˜ ìˆë‹¤. ì´ì œ posts feedë¥¼ ë³´ë‹¤ ìœ ìš©í•˜ê²Œ ë§Œë“¤ì–´ì£¼ëŠ” ì¶”ê°€ì ì¸ ë¡œì§ë“¤ì„ ì¶”ê°€í•˜ì. 

### Storing Dates for Posts

SNS feedsëŠ” ì¼ë°˜ì ìœ¼ë¡œ postê°€ ìƒì„±ë˜ì—ˆëŠ”ê°€ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ì •ë ¬í•˜ê³ , postì˜ creation timeì„ "5 hours ago"ì™€ ê°™ì€ ìƒëŒ€ì ì¸ í‘œí˜„ìœ¼ë¡œ ë³´ì—¬ì¤€ë‹¤. ì´ë ‡ê²Œ í•˜ê¸° ìœ„í•´ì„œ date fieldë¥¼ post entriesì—ì„œ íŠ¸ë˜í‚¹í•´ì•¼í•œë‹¤. 

posts.user fieldì™€ ë§ˆì°¬ê°€ì§€ë¡œ, postAdded prepare callbackì„ actionì´ dispatchë  ë•Œ, í•­ìƒ post.dateë¥¼ í¬í•¨í•˜ë„ë¡ ì—…ë°ì´íŠ¸ í•  ê²ƒì´ë‹¤. í•˜ì§€ë§Œ, ë‹¤ë¥¸ íŒŒë¼ë¯¸í„°ê°€ ì „ë‹¬ë˜ëŠ” ê²ƒì€ ì•„ë‹ˆë‹¤. ìš°ë¦¬ëŠ” í•­ìƒ ì •í™•í•œ timestampë¥¼ ì‚¬ìš©í•˜ê¸°ë¥¼ ì›í•˜ê¸° ë•Œë¬¸ì—, prepare callbackì´ ì´ë¥¼ hadleí•˜ë„ë¡ í•  ê²ƒì´ë‹¤. 

** CAUTION **
Redux actionsì™€ stateëŠ” í•­ìƒ plain JS valueì´ì–´ì•¼ í•œë‹¤. (objects, array, primitivesì™€ ê°™ì´) class instanceë‚˜ í•¨ìˆ˜, ë˜ëŠ” non-serializable valuesë¥¼ Reduxì— ë„£ìœ¼ë©´ ì•ˆëœë‹¤. 

ìš°ë¦¬ëŠ” Date class instanceë¥¼ Redux storeì— ë„£ì„ ìˆ˜ ì—†ê¸° ë•Œë¬¸ì—, post.date ê°’ì„ timestamp stringìœ¼ë¡œ í•´ì„œ íŠ¸ë˜í‚¹í•  ê²ƒì´ë‹¤. 

```js
features/posts/postsSlice.js
    postAdded: {
      reducer(state, action) {
        state.push(action.payload)
      },
      prepare(title, content, userId) {
        return {
          payload: {
            id: nanoid(),
            date: new Date().toISOString(),
            title,
            content,
            user: userId,
          },
        }
      },
    },
```

post authorsì™€ ë§ˆì°¬ê°€ì§€ë¡œ ìš°ë¦¬ëŠ” ìƒëŒ€ì ì¸ timestamp í‘œí˜„ì„ <PostsList> and <SinglePostPage> ì»´í¬ë„ŒíŠ¸ ë‘˜ ë‹¤ ë„£ì–´ì£¼ì–´ì•¼ í•œë‹¤. ìš°ë¦¬ëŠ” timestamp stringì„ relative descriptionìœ¼ë¡œ í¬ë§·íŒ…í•´ì£¼ëŠ” <TimeAgo> ì»´í¬ë„ŒíŠ¸ë¥¼ ì¶”ê°€í•´ì¤„ ê²ƒì´ë‹¤. `date-fns`ì™€ ê°™ì€ ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” dateë¥¼ parsing, formatting í•˜ëŠ”ë° ìœ ìš©í•œ í•¨ìˆ˜ë“¤ì„ ì œê³µí•´ì¤€ë‹¤. 

```js
features/posts/TimeAgo.js
import React from 'react'
import { parseISO, formatDistanceToNow } from 'date-fns'

export const TimeAgo = ({ timestamp }) => {
  let timeAgo = ''
  if (timestamp) {
    const date = parseISO(timestamp)
    const timePeriod = formatDistanceToNow(date)
    timeAgo = `${timePeriod} ago`
  }

  return (
    <span title={timestamp}>
      &nbsp; <i>{timeAgo}</i>
    </span>
  )
}
```
### Sorting the Posts List

<PostsList>ëŠ” í˜„ì¬ ëª¨ë“  postsë¥¼ postsê°€ Redux storeì— ì €ì¥ëœ ìˆœì„œì— ë”°ë¼ì„œ ë³´ì—¬ì£¼ê³  ìˆë‹¤. ìš°ë¦¬ì˜ ì˜ˆì œëŠ” ê°€ì¥ ì˜¤ë˜ëœ postê°€ ì²«ë²ˆì§¸ë¡œ, ê·¸ë¦¬ê³  ìƒˆë¡œìš´ í¬ìŠ¤íŠ¸ë¥¼ ì¶”ê°€í•  ë•Œë©´, posts arrayì˜ ë§¨ ëì— ì¶”ê°€ ëœë‹¤. ì´ê²ƒì€ ìƒˆë¡œìš´ postëŠ” í•­ìƒ í˜ì´ì§€ì˜ ë§¨ ì•„ë˜ì— ìœ„ì¹˜í•œë‹¤ëŠ” ëœ»ì´ë‹¤. 

ì¼ë°˜ì ìœ¼ë¡œ SNS feedëŠ” ê°€ì¥ ìµœê·¼ì˜ í¬ìŠ¤íŠ¸ë¥¼ ì²«ë²ˆì§¸ë¡œ ë³´ì—¬ì£¼ê³ , ê·¸ë¦¬ê³  ê·¸ ì´ì „ì˜ í¬ìŠ¤íŠ¸ë“¤ì„ ìŠ¤í¬ë¡¤ì„ ë‚´ë¦¬ë©´ì„œ ë³¼ ìˆ˜ ìˆë‹¤. dataëŠ” oldest-firstë¡œ storeì— ìœ ì§€ë ì§€ë¼ë„, ìš°ë¦¬ëŠ” <PostsList> ì»´í¬ë„ŒíŠ¸ì— í•´ë‹¹ ë°ì´í„°ì˜ ìˆœì„œ ë°°ì¹˜ë¥¼ ë°”ê¿€ ìˆ˜ ìˆë‹¤. ê·¸ë ‡ê²Œ í•˜ë©´ ê°€ì¥ ìµœê·¼ì˜ í¬ìŠ¤íŠ¸ê°€ ì²« ë²ˆì§¸ë¡œ ì˜¤ê²Œí•  ìˆ˜ ìˆë‹¤. ì´ë¡ ì ìœ¼ë¡œ state.postsëŠ” ì´ë¯¸ ì •ë ¬ë˜ì–´ ìˆë‹¤ëŠ” ê²ƒì„ ì•Œê¸°ë•Œë¬¸ì—, ë‹¨ì§€ listë¥¼ ë’¤ì§‘ì–´ì¤„ ìˆ˜ ìˆë‹¤. í•˜ì§€ë§Œ reverseí•˜ëŠ” ê²ƒë³´ë‹¤ ê¸°ì¤€ì— ë”°ë¼ì„œ ì •ë ¬í•˜ëŠ” ê²ƒì´ ë” ë‚«ë‹¤.

array.sort()ëŠ” ê¸°ì¡´ì˜ ë°°ì—´ì„ mutateí•˜ê¸° ë•Œë¬¸ì—, ìš°ë¦¬ëŠ” state.postsë¥¼ ë³µì‚¬í•˜ê³  ì´ë¥¼ sortí•´ì•¼í•œë‹¤. ìš°ë¦¬ëŠ” post.date fieldsëŠ” date timestamp stringsìœ¼ë¡œ ì €ì¥ë˜ì–´ ìˆë‹¤ëŠ” ê²ƒì„ ì•Œê¸° ë•Œë¬¸ì—, ì´ë¥¼ ì •ë ¬í•˜ê¸° ìœ„í•´ì„œ ì§ì ‘ ë¹„êµí•  ìˆ˜ ìˆë‹¤. 

```js
features/posts/PostsList.js
// Sort posts in reverse chronological order by datetime string
const orderedPosts = posts.slice().sort((a, b) => b.date.localeCompare(a.date))

const renderedPosts = orderedPosts.map(post => {
  return (
    <article className="post-excerpt" key={post.id}>
      <h3>{post.title}</h3>
      <div>
        <PostAuthor userId={post.user} />
        <TimeAgo timestamp={post.date} />
      </div>
      <p className="post-content">{post.content.substring(0, 100)}</p>
      <Link to={`/posts/${post.id}`} className="button muted-button">
        View Post
      </Link>
    </article>
  )
})
```

ìš°ë¦¬ ë˜í•œ postsSlice.jsì˜ initialStateì— date fieldë¥¼ ì¶”ê°€í•´ì£¼ì–´ì•¼ í•œë‹¤. 
```js
features/posts/postsSlice.js
import { createSlice, nanoid } from '@reduxjs/toolkit'
import { sub } from 'date-fns'

const initialState = [
  {
    // omitted fields
    content: 'Hello!',
    date: sub(new Date(), { minutes: 10 }).toISOString()
  },
  {
    // omitted fields
    content: 'More text',
    date: sub(new Date(), { minutes: 5 }).toISOString()
  }
]
```

### Post Reaction Buttons
We have one more new feature to add for this section. Right now, our posts are kind of boring. We need to make them more exciting, and what better way to do that than letting our friends add reaction emoji to our posts?

We'll add a row of emoji reaction buttons at the bottom of each post in <PostsList> and <SinglePostPage>. Every time a user clicks one of the reaction buttons, we'll need to update a matching counter field for that post in the Redux store. Since the reaction counter data is in the Redux store, switching between different parts of the app should consistently show the same values in any component that uses that data.

Like with post authors and timestamps, we want to use this everywhere we show posts, so we'll create a <ReactionButtons> component that takes a post as a prop. We'll start by just showing the buttons inside, with the current reaction counts for each button:
```js
features/posts/ReactionButtons.js
import React from 'react'

const reactionEmoji = {
  thumbsUp: 'ğŸ‘',
  hooray: 'ğŸ‰',
  heart: 'â¤ï¸',
  rocket: 'ğŸš€',
  eyes: 'ğŸ‘€'
}

export const ReactionButtons = ({ post }) => {
  const reactionButtons = Object.entries(reactionEmoji).map(([name, emoji]) => {
    return (
      <button key={name} type="button" className="muted-button reaction-button">
        {emoji} {post.reactions[name]}
      </button>
    )
  })

  return <div>{reactionButtons}</div>
}
```
We don't yet have a post.reactions field in our data, so we'll need to update the initialState post objects and our postAdded prepare callback function to make sure that every post has that data inside, like reactions: {thumbsUp: 0, hooray: 0}.

Now, we can define a new reducer that will handle updating the reaction count for a post when a user clicks the reaction button.

Like with editing posts, we need to know the ID of the post, and which reaction button the user clicked on. We'll have our action.payload be an object that looks like {id, reaction}. The reducer can then find the right post object, and update the correct reactions field.
```js
const postsSlice = createSlice({
  name: 'posts',
  initialState,
  reducers: {
    reactionAdded(state, action) {
      const { postId, reaction } = action.payload
      const existingPost = state.find(post => post.id === postId)
      if (existingPost) {
        existingPost.reactions[reaction]++
      }
    }
    // other reducers
  }
})

export const { postAdded, postUpdated, reactionAdded } = postsSlice.actions
```

As we've seen already, createSlice lets us write "mutating" logic in our reducers. If we weren't using createSlice and the Immer library, the line existingPost.reactions[reaction]++ would indeed mutate the existing post.reactions object, and this would probably cause bugs elsewhere in our app because we didn't follow the rules of reducers. But, since we are using createSlice, we can write this more complex update logic in a simpler way, and let Immer do the work of turning this code into a safe immutable update.

Notice that our action object just contains the minimum amount of information needed to describe what happened. We know which post we need to update, and which reaction name was clicked on. We could have calculated the new reaction counter value and put that in the action, but it's always better to keep the action objects as small as possible, and do the state update calculations in the reducer. This also means that reducers can contain as much logic as necessary to calculate the new state.

INFO
When using Immer, you can either "mutate" an existing state object, or return a new state value yourself, but not both at the same time. See the Immer docs guides on Pitfalls and Returning New Data for more details.

Our last step is to update the <ReactionButtons> component to dispatch the reactionAdded action when the user clicks a button:

```js
features/posts/ReactionButtons.jsx
import React from 'react'
import { useDispatch } from 'react-redux'

import { reactionAdded } from './postsSlice'

const reactionEmoji = {
  thumbsUp: 'ğŸ‘',
  hooray: 'ğŸ‰',
  heart: 'â¤ï¸',
  rocket: 'ğŸš€',
  eyes: 'ğŸ‘€'
}

export const ReactionButtons = ({ post }) => {
  const dispatch = useDispatch()

  const reactionButtons = Object.entries(reactionEmoji).map(([name, emoji]) => {
    return (
      <button
        key={name}
        type="button"
        className="muted-button reaction-button"
        onClick={() =>
          dispatch(reactionAdded({ postId: post.id, reaction: name }))
        }
      >
        {emoji} {post.reactions[name]}
      </button>
    )
  })

  return <div>{reactionButtons}</div>
}
```
Now, every time we click a reaction button, the counter should increment. If we browse around to different parts of the app, we should see the correct counter values displayed any time we look at this post, even if we click a reaction button in the <PostsList> and then look at the post by itself on the <SinglePostPage>.